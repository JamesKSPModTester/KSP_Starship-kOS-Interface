@PART[SEP_22_RAPTOR2_SL_KOS]:NEEDS[!FossilIndustries,Waterfall]:FOR[StarshipInterface]
{
    !EFFECTS {}
    EFFECTS
    {
        fx_nagata
        {
            AUDIO
            {
                channel = Ship
                clip = StarshipExpansionProject/Soundbank/raptor
                volume = 0.0 0.0
                volume = 0.1 0.3
                volume = 1.0 1.0
                pitch = 0.0 0.7
                pitch = 1.0 1.0
                loop = true
            }
        }
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = Waterfall/Sounds/ZorgSounds/engage_raptor
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = ThrustTransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
    }
    MODULE
    {
        name = ModuleWaterfallFX
        moduleID = nagataFX
        engineID = nagata
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = throttle
            linkedTo = throttle
        }
        CONTROLLER
        {
            name = random
            linkedTo = random
            range = -1,1
        }
        TEMPLATE
        {
            templateName = CryoRapFour
            overrideParentTransform = ThrustTransform
            position = 0,0,0
            rotation = 0, 0, 0
            scale:NEEDS[!RealSolarSystem] = 0.6,0.6,0.6
            scale:NEEDS[RealSolarSystem] = 0.96,0.96,0.96
        }
    }
    MODULE
    {
        name = ModuleB9PartSwitch
        moduleID = plumeSwitch
        switcherDescription = Plume
        switcherDescriptionPlural = Plumes
        affectDragCubes = false
        affectFARVoxels = false
        switchInFlight = true

        SUBTYPE
        {
            name = default
            title = Normal Plume
            primaryColor = SkyBlue
            secondaryColor = SkyBlue
            descriptionSummary = The normal plume for the SpaceX Raptor engine
        }
        SUBTYPE
        {
            name = fuel_rich
            title = Fuel Rich
            primaryColor = BubbleGumPink
            secondaryColor = BubbleGumPink
            descriptionSummary = Fuel rich engine plume
            MODULE
            {
                IDENTIFIER
                {
                    name = ModuleWaterfallFX
                }
                DATA
                {
                    TEMPLATE
                    {
                        name = fuel_rich
                        templateName = CryoRapFuelRich
                        scale = 0.65,0.65,0.65
                        rotation = 0,0,0
                        position = 0,0.0,0
                    }
                }
            }
        }
        SUBTYPE
        {
            name = engine_rich
            title = Engine Rich
            primaryColor = Cyan
            secondaryColor = Cyan
            descriptionSummary = If you see this on one of your flight, you might want to switch engines
            MODULE
            {
                IDENTIFIER
                {
                    name = ModuleWaterfallFX
                }
                DATA
                {
                    TEMPLATE
                    {
                        name = engine_rich
                        templateName = CryoRapEngineRich
                        scale = 0.65,0.65,0.65
                        rotation = 0,0,0
                        position = 0,0.0,0
                    }
                }
            }
        }
    }
}

@PART[SEP_22_RAPTOR_VAC_KOS]:NEEDS[!FossilIndustries,Waterfall]:FOR[StarshipInterface]
{
    !EFFECTS {}
    EFFECTS
    {
        fx_draper
        {
            AUDIO
            {
                channel = Ship
                clip = StarshipExpansionProject/Soundbank/raptor
                volume = 0.0 0.0
                volume = 0.1 0.3
                volume = 1.0 1.0
                pitch = 0.0 0.7
                pitch = 1.0 1.0
                loop = true
            }
        }
        engage
        {
            AUDIO
            {
              channel = Ship
              clip = Waterfall/Sounds/ZorgSounds/engage_raptor
              volume = 1.0
              pitch = 1.0
              loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = ThrustTransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
    }
    MODULE
    {
        name = ModuleWaterfallFX
        moduleID = DraperFX
        engineID = draper
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = throttle
            linkedTo = throttle
        }
        CONTROLLER
        {
            name = random
            linkedTo = random
            range = -1,1
        }
        TEMPLATE
        {
            templateName = CryoRapVac
            overrideParentTransform = ThrustTransform
            position = 0,0,0
            rotation = 0, 0, 0
            scale:NEEDS[!RealSolarSystem] = 1.2,1.2,1.2
            scale:NEEDS[RealSolarSystem] = 1.92,1.92,1.92
        }
    }
}

@PART[SEP_22_SHIP_BODY_KOS|SEP_22_SHIP_TANKER_KOS|SEP_22_SHIP_CARGO_KOS|SEP_22_SHIP_CREW_KOS|SEP_23_SHIP_BODY_EXP_KOS|SEP_23_SHIP_NOSE_EXP_KOS|SEP_23_SHIP_DEPOT_KOS]:NEEDS[Waterfall,!RealismOverhaul]:FOR[StarshipInterface]
{
    @EFFECTS
    {
        running
        {
            AUDIO_MULTI_POOL
            {
                channel = Ship
                transformName = RCS
                clip = sound_rocket_mini
                volume = 0.0 0.0
                volume = 0.1 0.0
                volume = 0.5 0.025
                volume = 1.0 0.1
                pitch = 1.0
                loop = true
            }
        }
    }
    MODULE
    {
        name = ModuleWaterfallFX
        moduleID = rcsFX
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = rcs
            linkedTo = rcs
        }
        TEMPLATE
        {
            templateName = SEP-SP-RCS
            overrideParentTransform = RCS
            position = 0,0,0
            rotation = 0, 0, 180
            scale = 1.0, 1.0, 1.0
        }
    }
}

@PART[SEP_22_BOOSTER_CORE_KOS]:NEEDS[Waterfall,!RealismOverhaul]:FOR[StarshipInterface]
{
    EFFECTS
    {
        running
        {
            AUDIO_MULTI_POOL
            {
                channel = Ship
                transformName = RCS
                clip = sound_rocket_mini
                volume = 0.0 0.0
                volume = 0.1 0.0
                volume = 0.5 0.025
                volume = 1.0 0.1
                pitch = 1.0
                loop = true
            }
        }
    }
    MODULE
    {
        name = ModuleWaterfallFX
        moduleID = rcsFX
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = rcs
            linkedTo = rcs
        }
        TEMPLATE
        {
            templateName = SEP-SP-RCS
            overrideParentTransform = RCS
            position = 0,0,0
            rotation = 0, 0, 180
            scale = 1,1,1
        }
    }
}

@PART[SEP_22_BOOSTER_CLUSTER_KOS]:NEEDS[!FossilIndustries,Waterfall]:FOR[StarshipInterface]
{
    !EFFECTS {}
    EFFECTS
    {
        running_full
        {
            AUDIO
            {
                channel = Ship
                clip = StarshipExpansionProject/Soundbank/superheavycluster
                volume = 0.0 0.0
                volume = 0.1 0.3
                volume = 1.0 1.0
                pitch = 0.0 0.7
                pitch = 1.0 1.0
                loop = true
            }
        }
        running_twelve
        {
            AUDIO
            {
                channel = Ship
                clip = StarshipExpansionProject/Soundbank/superheavycluster
                volume = 0.0 0.0
                volume = 0.1 0.3
                volume = 1.0 1.0
                pitch = 0.0 0.7
                pitch = 1.0 1.0
                loop = true
            }
        }
        running_three
        {
            AUDIO
            {
                channel = Ship
                clip = StarshipExpansionProject/Soundbank/superheavycluster
                volume = 0.0 0.0
                volume = 0.1 0.3
                volume = 1.0 1.0
                pitch = 0.0 0.7
                pitch = 1.0 1.0
                loop = true
            }
        }
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = Waterfall/Sounds/ZorgSounds/engage_raptor
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = fullthrusttransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
    }
    MODULE
    {
        name = ModuleWaterfallFX
        moduleID = raptorclusterFull
        engineID = AllEngines
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = throttle
            linkedTo = throttle
            engineID = AllEngines
        }
        CONTROLLER
        {
            name = random
            linkedTo = random
            range = -1,1
        }
        TEMPLATE
        {
            templateName = SuperheavyPlumeOne
            position = 0,0,0
            rotation = 0, 0, 0
            scale:NEEDS[!RealSolarSystem] = 0.6,0.6,0.6
            scale:NEEDS[RealSolarSystem] = 0.96,0.96,0.96
        }
    }
    MODULE
    {
        name = ModuleWaterfallFX
        moduleID = raptorclusterMiddle
        engineID = MiddleInner
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = throttle
            linkedTo = throttle
            engineID = MiddleInner
        }
        CONTROLLER
        {
            name = random
            linkedTo = random
            range = -1,1
        }
        TEMPLATE
        {
            templateName = CryoRapFour
            overrideParentTransform = MiddleThrustTransform
            position = 0, 0, 0
            rotation = 0, 0, 0
            scale:NEEDS[!RealSolarSystem] = 0.6,0.6,0.6
            scale:NEEDS[RealSolarSystem] = 0.96,0.96,0.96
        }
    }
    MODULE:NEEDS[TundraExploration]
    {
        name = ModuleWaterfallFX
        moduleID = raptorclusterInner
        engineID = CenterThree
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = throttle
            linkedTo = throttle
            engineID = CenterThree
        }
        CONTROLLER
        {
            name = random
            linkedTo = random
            range = -1,1
        }
        TEMPLATE
        {
            templateName = CryoRapFour
            overrideParentTransform = CenterThrustTransform
            position = 0, 0, 0
            rotation = 0, 0, 0
            scale:NEEDS[!RealSolarSystem] = 0.6,0.6,0.6
            scale:NEEDS[RealSolarSystem] = 0.96,0.96,0.96
        }
    }
}

@PART[SEP_22_SHIP_BODY_KOS|SEP_22_SHIP_TANKER_KOS|SEP_22_SHIP_CARGO_KOS|SEP_22_SHIP_CREW_KOS|SEP_22_BOOSTER_CORE_KOS|SEP_23_SHIP_BODY_EXP_KOS|SEP_23_SHIP_DEPOT_KOS]:FOR[StarshipInterface]:NEEDS[!FossilIndustries,Waterfall]
{
	EFFECTS
	{
		running_vent
		{
			AUDIO_MULTI_POOL
			{
				channel = Ship
				transformName = VentTransform
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 1.0 0.1
				pitch = 1.0
				loop = true
			}
		}
	}
    MODULE
    {
        name = ModuleWaterfallFX
        moduleID = ventFX
        CONTROLLER
        {
            name = thrust
            linkedTo = thrust
            engineID = Vents
        }
        TEMPLATE
        {
            templateName = sep-vent-jet
            overrideParentTransform = VentTransform
            position = 0,0.0005,0
            rotation = 0, 0, 180
            scale = 2.1, 6.5, 2.1
        }
    }
}