@PART[SEP_22_BOOSTER_CLUSTER_KOS]:NEEDS[FossilIndustries,Waterfall]:FOR[StarshipInterface]
{
	!MODULE[ModuleWaterfallFX],* {}
	!EFFECTS {}
	EFFECTS
	{
		running_full
		{
			AUDIO
			{
				channel = Ship
				clip = Fossil Industries/Raptor Plume/Sounds/SHRunning
				volume = 0.0 0.0
				volume = 0.1 1.0
				volume = 1.0 1.0
				pitch = 0.0 0.6
				pitch = 1.0 1.0
				loop = true
			}
		}
		running_twelve
		{
			AUDIO
			{
				channel = Ship
				clip = Fossil Industries/Raptor Plume/Sounds/SHRunning
				volume = 0.0 0.0
				volume = 0.1 0.6
				volume = 1.0 1.0
				pitch = 0.0 0.8
				pitch = 1.0 1.2
				loop = true
			}
		}
		running_three
		{
			AUDIO
			{
				channel = Ship
				clip = Fossil Industries/Raptor Plume/Sounds/RaptorSL
				volume = 0.0 0.0
				volume = 0.1 0.8
				volume = 1.0 1.0
				pitch = 0.0 0.8
				pitch = 1.0 1.0
				loop = true
			}
		}
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = Fossil Industries/Raptor Plume/Sounds/SHIgnition
                volume = 1.0
                pitch = 1.2
                loop = false
            }
        }
        disengage
        {
            PREFAB_PARTICLE
            {
                prefabName = SRB_LargeSparks
                transformName = CenterThrustTransform
                energy = 0.0 0.0
                energy = 0.1 2.0
                energy = 1.0 2.0
                emission = 0.0 4.0
                emission = 1.0 4.0
                speed = 0.0 0.0
                speed = 0.1 0.4
                speed = 1.0 0.4
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = Fossil Industries/Raptor Plume/Sounds/SHShutdown
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = CenterThrustTransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = Fossil Industries/Raptor Plume/Sounds/SHShutdown
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
	}
  	MODULE
  	{
        name = ModuleWaterfallFX
        moduleID = raptorclusterFull
        engineID = AllEngines
        version = FixedRampRates
        ATMOSPHEREDENSITYCONTROLLER
        {
            name = atmosphereDepth
        }
        THROTTLECONTROLLER
        {
            name = throttle
            responseRateUp = 6
            responseRateDown = 6
            engineID = AllEngines
        }
        RANDOMNESSCONTROLLER
        {
            name = random
            noiseType = random
            scale = 1
            minimum = 0
            speed = 1
            range = -1,1
        }
        ENGINEEVENTCONTROLLER
        {
            eventName = ignition
            eventDuration = 2
            name = Startup
            eventCurve
            {
                key = 0 0 10 10
                key = 0.1 1 4.444445 4.444445
                key = 1 0 -1.111111 -1.111111
	   		}
   		}
        ENGINEEVENTCONTROLLER
        {
            eventName = flameout
            eventDuration = 0.8
            name = Flameout
            eventCurve
            {
                key = 0 0 10 10
                key = 0.1 1 4.444445 4.444445
                key = 1 0 -1.111111 -1.111111
	   		}
   		}
        TEMPLATE
        {
            templateName = FossilSHFull
            overrideParentTransform = AllThrustTransform
            position = 0,0,0
            rotation = 270, 0, 0
            scale:NEEDS[!RealSolarSystem] = 0.9,0.9,0.9
            scale:NEEDS[RealSolarSystem] = 1.44,1.44,1.44
        }
  	}
	MODULE
  	{
        name = ModuleWaterfallFX
        moduleID = raptorclusterMiddle
        engineID = MiddleInner
		version = FixedRampRates
        ATMOSPHEREDENSITYCONTROLLER
        {
            name = atmosphereDepth
        }
        THROTTLECONTROLLER
        {
            name = throttle
            responseRateUp = 6
            responseRateDown = 6
            engineID = MiddleInner
        }
        RANDOMNESSCONTROLLER
        {
            name = random
            noiseType = random
            scale = 1
            minimum = 0
            speed = 1
            range = -1,1
        }
        ENGINEEVENTCONTROLLER
        {
            eventName = ignition
            eventDuration = 2
            name = Startup
            eventCurve
            {
                key = 0 0 10 10
                key = 0.1 1 4.444445 4.444445
                key = 1 0 -1.111111 -1.111111
	   		}
   		}
        ENGINEEVENTCONTROLLER
        {
            eventName = flameout
            eventDuration = 0.8
            name = Flameout
            eventCurve
            {
                key = 0 0 10 10
                key = 0.1 1 4.444445 4.444445
                key = 1 0 -1.111111 -1.111111
	   		}
   		}
        TEMPLATE
        {
            templateName = FossilSHMiddle
            overrideParentTransform = MiddleThrustTransform
            position = 0, 0, 0
            rotation = 270, 0, 0
            scale:NEEDS[!RealSolarSystem] = 0.9,0.4,0.9
            scale:NEEDS[RealSolarSystem] = 1.44,0.64,1.44
        }
  	}
  	MODULE
  	{
        name = ModuleWaterfallFX
        moduleID = raptorclusterInner
        engineID = CenterThree
		version = FixedRampRates
        ATMOSPHEREDENSITYCONTROLLER
        {
            name = atmosphereDepth
        }
        THROTTLECONTROLLER
        {
            name = throttle
            responseRateUp = 8
            responseRateDown = 8
            engineID = CenterThree
        }
        RANDOMNESSCONTROLLER
        {
            name = random
            noiseType = random
            scale = 1
            minimum = 0
            speed = 1
            range = -1,1
        }
        ENGINEEVENTCONTROLLER
        {
            eventName = ignition
            eventDuration = 2
            name = Startup
            eventCurve
            {
                key = 0 0 10 10
                key = 0.1 1 4.444445 4.444445
                key = 1 0 -1.111111 -1.111111
	   		}
   		}
        ENGINEEVENTCONTROLLER
        {
            eventName = flameout
            eventDuration = 0.8
            name = Flameout
            eventCurve
            {
                key = 0 0 10 10
                key = 0.1 1 4.444445 4.444445
                key = 1 0 -1.111111 -1.111111
	   		}
   		}
        TEMPLATE
        {
            templateName = FossilSHCenter
            overrideParentTransform = CenterThrustTransform
            position = 0, 0, 0
            rotation = 270, 0, 0
            scale:NEEDS[!RealSolarSystem] = 1,1,1
            scale:NEEDS[RealSolarSystem] = 1.6,1.6,1.6
		}
	}
}

@PART[SEP_22_RAPTOR2_SL_KOS]:NEEDS[FossilIndustries,Waterfall]:FOR[StarshipInterface]
{
	!MODULE[ModuleWaterfallFX],* {}
  	!EFFECTS {}
	EFFECTS
	{
		fx_nagata
		{
			AUDIO
			{
				channel = Ship
				clip = Fossil Industries/Raptor Plume/Sounds/RaptorSL
				volume = 0.0 0.0
				volume = 0.1 0.8
				volume = 1.0 1.0
				pitch = 0.0 0.8
				pitch = 1.0 1.0
				loop = true
			}
		}
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = Fossil Industries/Raptor Plume/Sounds/RaptorSLIgnite
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
        disengage
        {
            PREFAB_PARTICLE
            {
                prefabName = SRB_LargeSparks
                transformName = ThrustTransform
				energy = 0.0 0.0
				energy = 0.1 2.0
				energy = 1.0 2.0
				emission = 0.0 4.0
				emission = 1.0 4.0
				speed = 0.0 0.0
				speed = 0.1 0.4
				speed = 1.0 0.4
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = Fossil Industries/Raptor Plume/Sounds/RaptorSLFlameout
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = ThrustTransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = Fossil Industries/Raptor Plume/Sounds/RaptorSLFlameout
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
	}
	MODULE
  	{
        name = ModuleWaterfallFX
        moduleID = PurpleFossilRaptor2FX
        engineID = nagata
        version = FixedRampRates
        ATMOSPHEREDENSITYCONTROLLER
        {
            name = atmosphereDepth
        }
        THROTTLECONTROLLER
        {
            name = throttle
            responseRateUp = 8
            responseRateDown = 8
            engineID = CenterThree
        }
        RANDOMNESSCONTROLLER
        {
            name = random
            noiseType = random
            scale = 1
            minimum = 0
            speed = 1
            range = -1,1
        }
        ENGINEEVENTCONTROLLER
        {
            eventName = ignition
            eventDuration = 2
            name = Startup
            eventCurve
            {
                key = 0 0 10 10
                key = 0.1 1 4.444445 4.444445
                key = 1 0 -1.111111 -1.111111
	   		}
   		}
        ENGINEEVENTCONTROLLER
        {
            eventName = flameout
            eventDuration = 0.8
            name = Flameout
            eventCurve
            {
                key = 0 0 10 10
                key = 0.1 1 4.444445 4.444445
                key = 1 0 -1.111111 -1.111111
	   		}
   		}
		GIMBALCONTROLLER
		{
			axis = x
			name = Gimbal
		}
        TEMPLATE
        {
            templateName = PurpleFossilRaptor2
            overrideParentTransform = ThrustTransform
            position = 0, 0, 0
            rotation = 270, 0, 0
            scale:NEEDS[!RealSolarSystem] = 1,1,1
            scale:NEEDS[RealSolarSystem] = 1.6,1.6,1.6
		}
	}
	!MODULE[ModuleB9PartSwitch],-1 {}
	MODULE
  	{
  		name = ModuleB9PartSwitch
		moduleID = plumeSwitch
		switcherDescription = Plume
		switcherDescriptionPlural = Plumes
		affectDragCubes = false
		affectFARVoxels = false
		switchInFlight = true
		SUBTYPE
		{
			name = default
			title = Purple Plume
			primaryColor = BlueBlue
			secondaryColor = BlueBlue
			descriptionSummary = Purple variant of the Raptor plume
		}
		SUBTYPE
        {
            name = fuel_rich
			title = Fuel Rich
			primaryColor = BurntYellow
			secondaryColor = BurntYellow
			descriptionSummary = Fuel Rich variant of the Raptor plume
            MODULE
            {
                IDENTIFIER
                {
                    name = ModuleWaterfallFX
                }
                DATA
                {
                    TEMPLATE
                    {
                        name = fuel_rich
                        templateName = FossilFuelRichRaptor
                        scale:NEEDS[!RealSolarSystem] = 1,1,1
                        scale:NEEDS[RealSolarSystem] = 1.6,1.6,1.6
                        rotation = 270,0,0
                        position = 0,0.0,0
                    }
                }
            }
        }
		SUBTYPE
        {
            name = engine_rich
			title = Engine Rich
			primaryColor = BarfGreen
			secondaryColor = BarfGreen
			descriptionSummary = If you see this on one of your flight, you might want to switch engines
            MODULE
            {
                IDENTIFIER
                {
                    name = ModuleWaterfallFX
                }
                DATA
                {
                    TEMPLATE
                    {
                        name = engine_rich
						templateName = FossilEngineRichRaptor
						scale:NEEDS[!RealSolarSystem] = 1,1,1
                        scale:NEEDS[RealSolarSystem] = 1.6,1.6,1.6
						rotation = 270,0,0
						position = 0,0.0,0
                    }
                }
            }
        }
		SUBTYPE
        {
            name = superheavy
			title = Superheavy Plume
			primaryColor = Barney
			secondaryColor = Barney
			descriptionSummary = Use this if you're placing raptors onto the Superheavy cluster
            MODULE
            {
                IDENTIFIER
                {
                    name = ModuleWaterfallFX
                }
                DATA
                {
                    TEMPLATE
                    {
                        name = superheavy
						templateName = FossilSHFull
						overrideParentTransform = ThrustTransform
						scale:NEEDS[!RealSolarSystem] = 1,1,1
                        scale:NEEDS[RealSolarSystem] = 1.6,1.6,1.6
						rotation = 270,0,0
						position = 0,0.0,0
                    }
                }
            }
        }
  	}
}

@PART[SEP_22_RAPTOR_VAC_KOS]:NEEDS[FossilIndustries,Waterfall]:FOR[StarshipInterface]
{
	!MODULE[ModuleWaterfallFX],* {}
  	!EFFECTS {}
	EFFECTS
	{
		fx_draper
		{
			AUDIO
			{
				channel = Ship
				clip = Fossil Industries/Raptor Plume/Sounds/RVacRunning
				volume = 0.0 0.0
				volume = 0.1 0.8
				volume = 1.0 1.0
				pitch = 0.0 0.8
				pitch = 1.0 1.0
				loop = true
			}
		}
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = Fossil Industries/Raptor Plume/Sounds/RVacIgnition
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
        disengage
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = ThrustTransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = Fossil Industries/Raptor Plume/Sounds/RaptorSLFlameout
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = ThrustTransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = Fossil Industries/Raptor Plume/Sounds/RaptorSLFlameout
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
	}
	MODULE
  	{
        name = ModuleWaterfallFX
        moduleID = FossilRVacFX
        engineID = draper
		version = FixedRampRates
        ATMOSPHEREDENSITYCONTROLLER
        {
            name = atmosphereDepth
        }
        THROTTLECONTROLLER
        {
            name = throttle
            responseRateUp = 8
            responseRateDown = 8
            engineID = CenterThree
        }
        RANDOMNESSCONTROLLER
        {
            name = random
            noiseType = random
            scale = 1
            minimum = 0
            speed = 1
            range = -1,1
        }
        ENGINEEVENTCONTROLLER
        {
            eventName = ignition
            eventDuration = 2
            name = Startup
            eventCurve
            {
                key = 0 0 10 10
                key = 0.1 1 4.444445 4.444445
                key = 1 0 -1.111111 -1.111111
	   		}
   		}
        ENGINEEVENTCONTROLLER
        {
            eventName = flameout
            eventDuration = 0.8
            name = Flameout
            eventCurve
            {
                key = 0 0 10 10
                key = 0.1 1 4.444445 4.444445
                key = 1 0 -1.111111 -1.111111
	   		}
   		}
        TEMPLATE
        {
            templateName = FossilRVac
            overrideParentTransform = ThrustTransform
            position = 0, 0, 0
            rotation = 270, 0, 0
            scale:NEEDS[!RealSolarSystem] = 1,1,1
            scale:NEEDS[RealSolarSystem] = 1.6,1.6,1.6
		}
	}
}


@PART[SEP_22_BOOSTER_CORE_KOS]:NEEDS[FossilIndustries,Waterfall]:FOR[StarshipInterface]
{
	!MODULE[ModuleWaterfallFX],* {}
	EFFECTS
	{
		running
		{
            AUDIO_MULTI_POOL
            {
                channel = Ship
                transformName = RCS
                clip = sound_rocket_mini
                volume = 0.0 0.0
                volume = 0.1 0.0
                volume = 1.0 0.5
                volume = 1.0 0.1
                pitch = 1.0
                loop = true
            }
        }
  	}
  	MODULE
  	{
		name = ModuleWaterfallFX
		moduleID = SHFX
		ATMOSPHEREDENSITYCONTROLLER
		{
			name = atmosphereDepth
		}
		RCSCONTROLLER
		{
			name = rcs
			responseRateUp = 100
			responseRateDown = 100
			thrusterTransformName =
		}
		RANDOMNESSCONTROLLER
		{
			name = random
			noiseType = random
			range = -1,1
		}
		TEMPLATE
		{
			templateName = sh-vent-rcs
			overrideParentTransform = RCS
			scale:NEEDS[!RealSolarSystem] = 2.0999999,6.5,2.0999999
			scale:NEEDS[RealSolarSystem] = 3.344,10.4,3.344
			rotation = 0,0,180
			position = 0,0.000500000024,0
		}
  	}
	EFFECTS
	{
		running_vent
		{
			AUDIO_MULTI_POOL
			{
				channel = Ship
				transformName = VentTransform
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 1.0 0.1
				pitch = 1.0
				loop = true
			}
		}
	}
  	MODULE
  	{
        name = ModuleWaterfallFX
        moduleID = ventFX
        CONTROLLER
        {
            name = thrust
            linkedTo = thrust
	  		engineID = Vents
        }
        TEMPLATE
        {
            templateName = sep-vent-jet
            overrideParentTransform = VentTransform
			position = 0,0.0005,0
			rotation = 0, 0, 180
			scale =
            scale:NEEDS[!RealSolarSystem] = 2.1,6.5,2.1
			scale:NEEDS[RealSolarSystem] = 3.36,10.4,3.36
        }
  	}
}